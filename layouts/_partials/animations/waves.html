{{- /*
CSS-based wave animation background
Pure CSS, no external dependencies
*/ -}}

{{- $config := site.Params.animatedBackground.waves }}
{{- $waveCount := $config.waveCount | default 3 }}
{{- $primaryColor := $config.primaryColor | default "rgba(79, 70, 229, 0.1)" }}
{{- $animationDuration := $config.animationDuration | default 15 }}

<div class="wave-background bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-blue-900">
  <div class="wave-container">
    {{- range seq $waveCount }}
    <div class="wave wave-{{ . }}"></div>
    {{- end }}
  </div>
</div>

<style>
.wave-background {
  position: absolute;
  inset: 0;
}

.wave-container {
  position: absolute;
  bottom: 0;
  left: 0;
  width: 100%;
  height: 300px;
  overflow: hidden;
}

.wave {
  position: absolute;
  bottom: 0;
  left: 0;
  width: 200%;
  height: 100%;
  background: linear-gradient(transparent 50%, {{ $primaryColor }});
  animation: wave {{ $animationDuration }}s linear infinite;
  transform-origin: bottom center;
}

{{- range seq $waveCount }}
{{- $delay := mul (sub . 1) (div $animationDuration 3) }}
{{- $opacity := div 1.0 . }}
.wave-{{ . }} {
  animation-delay: -{{ $delay }}s;
  opacity: {{ $opacity }};
  background: linear-gradient(transparent {{ mul . 10 }}%, {{ $primaryColor }});
}
{{- end }}

@keyframes wave {
  0% {
    transform: translateX(0) translateZ(0) scaleY(1);
  }
  50% {
    transform: translateX(-25%) translateZ(0) scaleY(0.8);
  }
  100% {
    transform: translateX(-50%) translateZ(0) scaleY(1);
  }
}

/* 尊重用户的动画偏好设置 */
@media (prefers-reduced-motion: reduce) {
  .wave {
    animation: none;
  }
}
</style>
