{{- /* 输出整站页面列表为 JSON，用于 Pagefind 搜索索引 */ -}}
{{- $items := slice -}}
{{- range .Site.RegularPages -}}
  {{- /* 只索引已发布的页面 */ -}}
  {{- if not .Draft -}}
    {{- $item := dict
        "title" .Title
        "url" .RelPermalink
        "content" (.Plain | strings.TrimSpace)
        "summary" (.Summary | strings.TrimSpace)
        "section" .Section
        "type" .Type
        "lastmod" (.Lastmod.Format "2006-01-02T15:04:05Z07:00")
        "date" (.Date.Format "2006-01-02T15:04:05Z07:00")
        "uid" (.File.UniqueID | default "")
        "tags" (.Params.tags | default slice)
        "categories" (.Params.categories | default slice)
        "readingTime" .ReadingTime
        "wordCount" .WordCount
      -}}
    {{- $items = $items | append $item -}}
  {{- end -}}
{{- end -}}
{{- $items | jsonify -}}